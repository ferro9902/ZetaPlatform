# =============================================================================
# PEC Integration Service - Application Configuration
# =============================================================================
# Kubernetes deployment notes:
#   - Properties marked [ConfigMap] → go into the k8s ConfigMap
#   - Properties marked [Secret]    → reference a k8s Secret via envFrom / env
#   - Properties marked [Default]   → hardcoded defaults, no override needed
# =============================================================================

# [Default] Service identity
spring.application.name=pec-integration-service

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
# [ConfigMap] HTTP port exposed by the pod
server.port=8080

# -----------------------------------------------------------------------------
# Virtual Threads (JDK 21+)
# -----------------------------------------------------------------------------
# [Default]
spring.threads.virtual.enabled=true

# -----------------------------------------------------------------------------
# gRPC Client Channels
# -----------------------------------------------------------------------------
# [ConfigMap] Internal cluster DNS names for sibling microservices
spring.grpc.client.channels.user-mgmt.address=static://user-mgmt-service:9090
spring.grpc.client.channels.user-auth.address=static://user-auth-service:9090

# -----------------------------------------------------------------------------
# Aruba PEC OAuth2 & API
# -----------------------------------------------------------------------------
# [Secret]  Injected from Kubernetes Secret (ARUBA_OAUTH2_CLIENT_ID)
aruba.oauth2.client-id=${ARUBA_OAUTH2_CLIENT_ID}
# [Secret]  Injected from Kubernetes Secret (ARUBA_OAUTH2_CLIENT_SECRET)
aruba.oauth2.client-secret=${ARUBA_OAUTH2_CLIENT_SECRET}

# [ConfigMap] Aruba OAuth2 provider endpoints (public URLs, not sensitive)
aruba.oauth2.authorization-uri=https://oauth.aruba.it/oauth2/authorize
aruba.oauth2.token-uri=https://oauth.aruba.it/oauth2/token

# [ConfigMap] Redirect URI registered with Aruba — override with ARUBA_OAUTH2_REDIRECT_URI env var
aruba.oauth2.redirect-uri=${ARUBA_OAUTH2_REDIRECT_URI:https://zeta.aruba.local/pec/oauth2/callback}

# [ConfigMap] Scopes and base URL
aruba.oauth2.scope=pec:read pec:write
aruba.oauth2.api-base-url=https://api.pec.aruba.it/v1

# [ConfigMap] HTTP client timeouts (milliseconds)
aruba.oauth2.connect-timeout-ms=5000
aruba.oauth2.read-timeout-ms=30000

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# [ConfigMap] Log levels (JSON format output handled by logback-spring.xml)
logging.level.root=INFO
logging.level.com.aruba.zeta=INFO

# -----------------------------------------------------------------------------
# Actuator / Observability
# -----------------------------------------------------------------------------
# [Default] Endpoints exposed for health probes, Prometheus scraping, log-level changes
management.endpoints.web.exposure.include=health,info,loggers,metrics,prometheus
management.endpoint.health.probes.enabled=true
